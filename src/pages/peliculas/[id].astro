---
import Layout from "../../layouts/Layout.astro";
import peliculas from "../../Data/peliculas.json";

export async function getStaticPaths() {
  return peliculas.map((peli) => ({
    params: { id: String(peli.id) }
  }));
}

const { id } = Astro.params;

const peli = peliculas.find((p) => String(p.id) === id);

if (!peli) {
  throw new Error(`Oops! No se encontró la película con ID ${id}.`);
}
---

<Layout title={peli.nombre}>
  <main class="text-white">

    <div
      class="fixed inset-0 bg-cover bg-center blur-sm -z-20"
      style={`background-image: url('${peli.imagen}')`}>
    </div>
    <div class="fixed inset-0 bg-black/60 -z-10"></div>

    <section class="max-w-3xl mx-auto px-6 py-12 space-y-6">
      <h1 class="text-4xl font-bold">{peli.nombre}</h1>
      <p class="text-gray-300">{peli.descripcion}</p>
      <img src={peli.imagen} alt={peli.nombre} class="rounded-lg shadow-xl mx-auto" />
      <p class="text-yellow-400 font-semibold text-xl">Año: {peli.año}</p>
      <a
        href="/"
        class="inline-block mt-4 px-4 py-2 bg-yellow-400 text-black font-semibold rounded-md hover:bg-yellow-300 transition"
      >
        Volver al inicio
      </a>
    </section>

  </main>
</Layout>